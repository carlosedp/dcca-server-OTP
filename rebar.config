{minimum_otp_vsn, "18"}.

{erl_opts,
 [debug_info,
  {parse_transform, lager_transform},
  {lager_truncation_size, 10485760},
  {i, "include"}]}.

{deps,
 [{lager, "3.9.2"},
  {observer_cli, "1.7.3"},
  {prometheus, "4.8.2"},
  {prometheus_diameter_collector, "1.2.1"},
  {prometheus_httpd, "2.1.11"},
  {prometheus_process_collector, "1.6.0"}]}.

{plugins, [rebar3_diameter_compiler, relflow, rebar3_dialyzer_html]}.

{provider_hooks, [{pre, [{compile, {diameter, compile}}, {clean, {diameter, clean}}]}]}.

{relx,
 [{release, {dccaserver, "1.0.0"}, [ocsgateway, dccaserver]},
  {sys_config, "./config/sys.config"},
  {vm_args, "./config/vm.args"},
  {dev_mode, true},
  {include_erts, false},
  {extended_start_script, true}]}.

{profiles,
 [{prod, [{relx, [{dev_mode, false}, {include_erts, true}, {include_src, false}]}]}]}.

%% xref checks to run
{xref_checks,
 [undefined_function_calls,
  undefined_functions,
  locals_not_used, % exports_not_used, that is a problem with having multiple apps
  deprecated_function_calls,
  deprecated_functions]}.

{dialyzer, [{warnings, [unknown]}, {plt_apps, all_deps}, {output_format, raw}]}.
